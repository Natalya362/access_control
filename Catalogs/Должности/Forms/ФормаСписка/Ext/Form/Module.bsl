&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    // Настройка динамического списка
    СписокДолжностей = Элементы.Добавить("СписокДолжностей", Тип("ТаблицаФормы"));
    СписокДолжностей.ПоложениеКоманднойПанели = ПоложениеКоманднойПанелиЭлементаФормы.Нет;
    
    // Добавляем колонки
    КолонкаГруппа = Элементы.Добавить("НаименованиеГруппы", Тип("ПолеФормы"), СписокДолжностей);
    КолонкаГруппа.Заголовок = "Наименование групп";
    КолонкаГруппа.ПутьКДанным = "СписокДолжностей.Родитель.Наименование";
    
    КолонкаДолжность = Элементы.Добавить("НаименованиеДолжности", Тип("ПолеФормы"), СписокДолжностей);
    КолонкаДолжность.Заголовок = "Должность";
    КолонкаДолжность.ПутьКДанным = "СписокДолжностей.Наименование";
    
    // Настройка динамического списка
    СписокДолжностей.ПутьКДанным = "СписокДолжностей";
    
    // Настройка источника данных
    СписокДолжностейДанные = ЭтаФорма.СписокДолжностей; // Реквизит формы типа "ДинамическийСписок"
    СписокДолжностейДанные.ПроизвольныйЗапрос = Истина;
    СписокДолжностейДанные.ТекстЗапроса = 
        "ВЫБРАТЬ
        |    Должности.Ссылка,
        |    Должности.Наименование,
        |    Должности.Родитель,
        |    Должности.Родитель.Наименование КАК РодительНаименование,
        |    Должности.ЭтоГруппа
        |ИЗ
        |    Справочник.Должности КАК Должности
        |ГДЕ
        |    НЕ Должности.ЭтоГруппа";
    
    // Устанавливаем отображение только элементов (без групп)
    СписокДолжностейДанные.ОсновнаяТаблица = "Справочник.Должности";
КонецПроцедуры